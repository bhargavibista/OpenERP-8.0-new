<?xml version="1.0" encoding="utf-8"?>
<openerp>
    <data>

        <!--
        AvaTax API Configuration in OpenERP
        -->

        <record id="view_account_salestax_avatax_form" model="ir.ui.view">
            <field name="name">account.salestax.avatax.form</field>
            <field name="model">account.salestax.avatax</field>
            <field name="type">form</field>
            <field name="arch" type="xml">
            <form string="AvaTax API">
                <group col="6" colspan="4">
                    <field name="company_id" groups="base.group_multi_company"/>
                    <field name="company_code"/>
                  </group>
             <notebook>
                <page string="Configuration">
                     <group colspan="2" col="2">
                     <separator string="Connection" colspan="2"/>
                      <field name="account_number"/>
                      <field name="license_key" password="True"/>
                      <field name="service_url"/>
                    <group colspan="2" col="4">
                        <field name="date_expiration"/>
                        <button name="ping" string="Test Connection" type="object" icon="gtk-go-forward"/>
                    </group>
                  </group>
                  <group colspan="2" col="2">
                    <separator string="Adaptor" colspan="2"/>
                    <field name="request_timeout"/>
                    <field name="logging"/>
                  </group>
                  <group colspan="2" col="2" expand="1">
                    <separator string="Address Validation" colspan="2"/>
                              <field name="address_validation"/>
                              <field name="result_in_uppercase"/>
                              <field name="validation_on_save"/>
                              <separator string="Countries" colspan="2"/>
                              <field name="country_ids" colspan="2" nolabel="1"/>
                  </group>
                  <group colspan="2" col="2">
                    <separator string="Tax Calculation" colspan="2"/>
                    <field name="disable_tax_calculation"/>
                              <field name="force_address_validation"/>
                              <field name="default_tax_schedule_id" attrs="{'required': [('disable_tax_calculation','=', False)]}"/>
                              <field name="default_shipping_code_id" attrs="{'required': [('disable_tax_calculation','=', False)]}" domain="[('type', '=', 'freight')]"/>
                     </group>
                    </page>
                    <page string="About AvaTax">
                        <label string="Use the following for technical support:"/>
                        <newline/>
                        <label string="Publisher: Avalara.Inc"/>
                        <newline/>
                        <label string="For Technical Support: support@avalara.com"/>
                        <newline/>
                        <label string="Support Information: http://www.avalara.com/Contact-Us"/>
                        <newline/>
                        <label string="Support Telephone: 877-780-4848"/>
                    </page>
                </notebook>
        </form>
      </field>
    </record>

    <record id="view_account_salestax_avatax_tree" model="ir.ui.view">
            <field name="name">account.salestax.avatax.tree</field>
            <field name="model">account.salestax.avatax</field>
            <field name="type">tree</field>
            <field name="arch" type="xml">
                <tree string="AvaTax API">
                  <field name="company_id" groups="base.group_multi_company"/>
                  <field name="company_code"/>
                    <field name="account_number"/>
                    <field name="service_url"/>
                    <field name="date_expiration"/>
                </tree>
            </field>
        </record>

        <record id="action_account_salestax_avatax" model="ir.actions.act_window">
            <field name="name">AvaTax API</field>
            <field name="res_model">account.salestax.avatax</field>
            <field name="view_type">form</field>
            <field name="view_mode">tree,form</field>
            <field name="help">Configuration of AvaTax in OpenERP</field>
        </record>

    <menuitem id="menu_avatax" name="AvaTax" parent="account.menu_finance_accounting" sequence="30"/>

    <menuitem action="action_account_salestax_avatax" id="menu_avatax_api" name="AvaTax API" parent="menu_avatax" sequence="30"/>

    <!--
    Jurisdiction Code
    -->

    <record id="view_jurisdiction_code_form" model="ir.ui.view">
            <field name="name">jurisdiction.code.form</field>
            <field name="model">jurisdiction.code</field>
            <field name="type">form</field>
            <field name="arch" type="xml">
                <form string="Tax Jurisdiction Code">
          <group col="6" colspan="4">
            <field name="name"/>
            <field name="code"/>
            <field name="type"/>
            <field name="state_id" domain="[('country_id','=',country_id)]"/>
          </group>
          <separator colspan="4" string="Accounting Information"/>
          <field name="account_collected_id" domain="[('type','&lt;&gt;','view'),('type','&lt;&gt;','consolidation')]"/>
          <field name="account_paid_id" domain="[('type','&lt;&gt;','view'),('type','&lt;&gt;','consolidation')]"/>
          <separator colspan="4" string="Tax Declaration: Invoices"/>
                    <field name="base_code_id"/>
                    <field name="base_sign"/>
                    <field name="tax_code_id"/>
                    <field name="tax_sign"/>
                    <separator colspan="4" string="Tax Declaration: Credit Notes"/>
                    <field name="ref_base_code_id"/>
                    <field name="ref_base_sign"/>
                    <field name="ref_tax_code_id"/>
                    <field name="ref_tax_sign"/>
        </form>
      </field>
    </record>

    <record id="view_jurisdiction_code_tree" model="ir.ui.view">
            <field name="name">jurisdiction.code.tree</field>
            <field name="model">jurisdiction.code</field>
            <field name="type">tree</field>
            <field name="arch" type="xml">
                <tree string="Tax Jurisdiction Code">
                    <field name="code"/>
                    <field name="name"/>
                    <field name="type"/>
                    <field name="state_id"/>
                </tree>
            </field>
        </record>

      <!--
      Tax Schedule
      -->

      <record id="view_tax_schedule_tree" model="ir.ui.view">
            <field name="name">tax.schedule.tree</field>
            <field name="model">tax.schedule</field>
            <field name="type">tree</field>
            <field name="arch" type="xml">
                <tree string="Tax Schedule">
                    <field name="code"/>
                    <field name="name"/>
                    <field name="country_id"/>
                    <field name="company_id" groups="base.group_multi_company"/>
                </tree>
            </field>
        </record>

    <record id="view_tax_schedule_form" model="ir.ui.view">
            <field name="name">tax.schedule.form</field>
            <field name="model">tax.schedule</field>
            <field name="type">form</field>
            <field name="arch" type="xml">
            <form string="Tax Schedule">
            <group col="6" colspan="4">
                <field name="name"/>
                <field name="code"/>
                <field name="country_id"/>
                <field name="company_id" groups="base.group_multi_company"/>
            </group>
          <field name="jurisdiction_code_ids" nolabel="1">
            <form string="Tax Jurisdiction Codes">
              <group col="6" colspan="4">
                <field name="name"/>
                <field name="code"/>
                <field name="type"/>
                <field name="state_id" domain="[('country_id','=',parent.country_id)]"/>
              </group>
              <separator colspan="4" string="Accounting Information"/>
              <field name="account_collected_id" domain="[('type','&lt;&gt;','view'),('type','&lt;&gt;','consolidation')]"/>
              <field name="account_paid_id" domain="[('type','&lt;&gt;','view'),('type','&lt;&gt;','consolidation')]"/>
              <separator colspan="4" string="Tax Declaration: Invoices"/>
                        <field name="base_code_id"/>
                        <field name="base_sign"/>
                        <field name="tax_code_id"/>
                        <field name="tax_sign"/>
                        <separator colspan="4" string="Tax Declaration: Credit Notes"/>
                        <field name="ref_base_code_id"/>
                        <field name="ref_base_sign"/>
                        <field name="ref_tax_code_id"/>
                        <field name="ref_tax_sign"/>
            </form>
               <tree string="Tax Jurisdiction Codes">
                    <field name="code"/>
                    <field name="name"/>
                    <field name="state_id"/>
                    <field name="type"/>
                </tree>
          </field>
        </form>
      </field>
    </record>

    <record id="action_tax_schedule" model="ir.actions.act_window">
            <field name="name">Tax Schedules</field>
            <field name="res_model">tax.schedule</field>
            <field name="view_type">form</field>
            <field name="view_mode">tree,form</field>
        </record>

    <menuitem action="action_tax_schedule" id="menu_tax_schedule" name="Tax Schedules" parent="menu_avatax" sequence="29"/>

    </data>
</openerp>